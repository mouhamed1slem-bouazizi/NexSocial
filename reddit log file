Publishing to 1 accounts: [ 'reddit:suareztn' ]
ğŸ“ Processed 1 media files
ğŸš€ Posting to reddit:suareztn...
ğŸ”´ Posting to Reddit for account suareztn (attempt 1)
ğŸ“ Content: test video kaso
ğŸ“ Media items: 1
ğŸ” Parsed metadata: {}
ğŸ“Š User moderates 0 subreddits
ğŸ“Š User karma: 0 (link: 0, comment: 0)
ğŸ¯ Posting to user profile: r/u_suareztn
ğŸ“¤ Processing 1 media items for Reddit
ğŸ” Checking media: KASO - ENNARD(5).mp4
   type: "video"
   mimeType: ""
   dataMimeType: ""
   data preview: "NO_DATA"
   data starts with 'data:': undefined
   isImage: false, isVideo: true
ğŸ“· Creating video post for Reddit
ğŸ¬ Attempting Reddit native video upload for v.redd.it hosting...
ğŸ”´ Uploading video to Reddit's native hosting: KASO - ENNARD(5).mp4
ğŸ“Š Media item structure: {
  hasData: false,
  hasBuffer: true,
  dataType: 'undefined',
  dataPreview: 'NO_DATA',
  bufferLength: 11253518
}
âœ… Using existing buffer: 11253518 bytes, MIME: video
ğŸ“Š Video validation: Size=11MB, Format=video/mp4
ğŸ“¡ Requesting Reddit upload URL with MIME type: video/mp4...
âœ… Got Reddit upload data: {
  args: {
    action: '//reddit-uploaded-video.s3-accelerate.amazonaws.com',
    fields: [
      [Object], [Object],
      [Object], [Object],
      [Object], [Object],
      [Object], [Object],
      [Object], [Object],
      [Object], [Object],
      [Object]
    ]
  },
  asset: {
    asset_id: '65dlvnhvftcf1',
    processing_state: 'incomplete',
    payload: { filepath: 'KASO - ENNARD(5).mp4' },
    websocket_url: 'wss://k8s-lb.wss.redditmedia.com/65dlvnhvftcf1?m=AQAAS9x0aNny9L95bm8u2csy1xRTWNTXozEK_On6yamhKBLo85BW'
  }
}
ğŸ” Upload data structure: {
  hasArgs: true,
  hasFields: true,
  fieldsType: 'object',
  fieldsLength: 13,
  fieldsPreview: [
    { name: 'x-amz-algorithm', value: 'AWS4-HMAC-SHA256' },
    {
      name: 'x-amz-credential',
      value: 'ASIATB45ILA5TQLV5FZU/20250714/us-east-1/s3/aws4_request'
    }
  ]
}
ğŸ“ Processing 13 form fields...
ğŸ“Š Video details: size=11253518 bytes, type=video/mp4, name=KASO - ENNARD(5).mp4
ğŸ“ Adding S3 field: x-amz-algorithm
ğŸ“ Adding S3 field: x-amz-credential
ğŸ“ Adding S3 field: x-amz-date
ğŸ“ Adding S3 field: x-amz-storage-class
ğŸ“ Adding S3 field: success_action_status
ğŸ“ Adding S3 field: bucket
ğŸ“ Adding S3 field: acl
ğŸ“ Adding S3 field: x-amz-signature
ğŸ“ Adding S3 field: key
ğŸ“ Adding S3 field: x-amz-meta-ext
ğŸ“ Adding S3 field: policy
ğŸ“ Adding S3 field: x-amz-security-token
ğŸ“ Adding S3 field: Content-Type
ğŸ“¤ File attached: KASO - ENNARD(5).mp4 (11253518 bytes)
ğŸ“Š FormData verification: unknown total fields
ğŸ“¤ Uploading video to Reddit S3...
ğŸ“¤ Upload URL: https://reddit-uploaded-video.s3-accelerate.amazonaws.com
ğŸ“Š Video buffer size: 11253518 bytes
ğŸ“¤ Sending multipart form data to S3 using axios...
âœ… Video uploaded to Reddit S3 successfully
ğŸ“Š S3 response: <?xml version="1.0" encoding="UTF-8"?>
<PostResponse><Location>https://reddit-uploaded-video.s3-accelerate.amazonaws.com/65dlvnhvftcf1</Location><Bucket>reddit-uploaded-video</Bucket><Key>65dlvnhvftcf1</Key><ETag>"8f86c816ee4c645a899ebc558a88f0ff"</ETag></PostResponse>
â³ Video processing may take a moment...
â³ Video processing wait completed
âš ï¸ v.redd.it URL test failed: Request failed with status code 403
ğŸ“º Reddit video asset ID: 65dlvnhvftcf1
ğŸ“º Reddit video URL: https://v.redd.it/65dlvnhvftcf1
â³ Waiting additional time for Reddit video processing...
ğŸ“º Video URL check status: 403
âš ï¸ Video URL not yet accessible, proceeding anyway
âœ… Created Reddit self post with embedded v.redd.it video: https://v.redd.it/65dlvnhvftcf1
ğŸ“¤ Submitting self post to Reddit with data: {
  api_type: 'json',
  kind: 'self',
  sr: 'u_suareztn',
  title: 'test video kaso',
  text: 'test video kaso\n\nhttps://v.redd.it/65dlvnhvftcf1',
  sendreplies: true,
  validate_on_submit: true,
  nsfw: false,
  spoiler: false,
  extension: 'json'
}
ğŸ”‘ Using access token: eyJhbGciOi...
ğŸ“Š Reddit submit response status: 200
ğŸ“Š Reddit submit response headers: {
  'accept-ranges': 'bytes',
  'cache-control': 'private, s-maxage=0, max-age=0, must-revalidate, no-store',
  connection: 'keep-alive',
  'content-encoding': 'gzip',
  'content-type': 'application/json; charset=UTF-8',
  date: 'Mon, 14 Jul 2025 10:20:44 GMT',
  expires: '-1',
  nel: '{"report_to": "w3-reporting-nel", "max_age": 14400, "include_subdomains": false, "success_fraction": 1.0, "failure_fraction": 1.0}',
  'report-to': '{"group": "w3-reporting-nel", "max_age": 14400, "include_subdomains": true,  "endpoints": [{ "url": "https://w3-reporting-nel.reddit.com/reports" }]}, {"group": "w3-reporting", "max_age": 14400, "include_subdomains": true, "endpoints": [{ "url": "https://w3-reporting.reddit.com/reports" }]}, {"group": "w3-reporting-csp", "max_age": 14400, "include_subdomains": true, "endpoints": [{ "url": "https://w3-reporting-csp.reddit.com/reports" }]}',
  server: 'snooserv',
  'set-cookie': 'edgebucket=mt5mleQoz27kivGAE0; Domain=reddit.com; Max-Age=63071999; Path=/;  secure',
  'strict-transport-security': 'max-age=31536000; includeSubdomains',
  'transfer-encoding': 'chunked',
  vary: 'Accept-Encoding',
  via: '1.1 varnish',
  'x-content-type-options': 'nosniff',
  'x-frame-options': 'SAMEORIGIN',
  'x-ratelimit-remaining': '998.0',
  'x-ratelimit-reset': '555',
  'x-ratelimit-used': '2',
  'x-ua-compatible': 'IE=edge',
  'x-xss-protection': '1; mode=block'
}
ğŸ“Š Reddit submit response body (first 500 chars): {"json": {"errors": [], "data": {"url": "https://www.reddit.com/r/u_suareztn/comments/1lziq16/test_video_kaso/", "drafts_count": 0, "id": "1lziq16", "name": "t3_1lziq16"}}}
ğŸ“Š Reddit submit parsed data: {
  "json": {
    "errors": [],
    "data": {
      "url": "https://www.reddit.com/r/u_suareztn/comments/1lziq16/test_video_kaso/",
      "drafts_count": 0,
      "id": "1lziq16",
      "name": "t3_1lziq16"
    }
  }
}
âœ… Posted to Reddit successfully
ğŸ“Š Post details: ID=1lziq16, URL=https://reddit.comhttps://www.reddit.com/r/u_suareztn/comments/1lziq16/test_video_kaso/
âŒ Reddit posting attempt failed: ReferenceError: supportedMedia is not defined
    at attemptRedditPost (/opt/render/project/src/server/routes/postRoutes.js:2672:32)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async postToReddit (/opt/render/project/src/server/routes/postRoutes.js:2815:12)
    at async /opt/render/project/src/server/routes/postRoutes.js:118:22
    at async Promise.all (index 0)
    at async /opt/render/project/src/server/routes/postRoutes.js:151:5
âŒ Error posting to Reddit: ReferenceError: supportedMedia is not defined
    at attemptRedditPost (/opt/render/project/src/server/routes/postRoutes.js:2672:32)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async postToReddit (/opt/render/project/src/server/routes/postRoutes.js:2815:12)
    at async /opt/render/project/src/server/routes/postRoutes.js:118:22
    at async Promise.all (index 0)
    at async /opt/render/project/src/server/routes/postRoutes.js:151:5
âŒ Failed to post to reddit:suareztn - supportedMedia is not defined
ğŸ“Š Posting complete: 0/1 successful