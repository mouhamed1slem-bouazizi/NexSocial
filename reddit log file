Attaching file to FormData...
📤 File attached using buffer method: TATI G13 - VITE (Official Audio, EP JBML #8).mp4 (7214203 bytes)
📊 FormData _fields length: unknown
📊 FormData _overheadLength: 1525
📊 FormData _valueLength: 7216893
📤 Uploading video to Reddit S3...
📤 Upload URL: https://reddit-uploaded-video.s3-accelerate.amazonaws.com
📊 FormData fields count: unknown
📊 Video buffer size: 7214203 bytes
📊 FormData headers: {
  'content-type': 'multipart/form-data; boundary=--------------------------001629570060879656430285'
}
📤 Sending multipart form data to S3...
❌ S3 upload failed (400): <?xml version="1.0" encoding="UTF-8"?>
<Error><Code>InvalidArgument</Code><Message>POST requires exactly one file upload per request.</Message><ArgumentName>file</ArgumentName><ArgumentValue>0</ArgumentValue><RequestId>K3BSTKF571DP0DQW</RequestId><HostId>o4k5gMOjY/oT0rwJIa2YB8CT0ntXF3iG1TD2TWK5XLzaqdtU75cEkLREXEsFijwrFkczLflmp1kmXw5GkT8xEykMNMEj0UMfPGcmpT+HdqA=</HostId></Error>
❌ S3 response headers: {
  connection: 'keep-alive',
  'content-type': 'application/xml',
  date: 'Mon, 14 Jul 2025 08:23:59 GMT',
  server: 'AmazonS3',
  'transfer-encoding': 'chunked',
  via: '1.1 4c7fd3c8d1d5afb1ce8ed03385580c2e.cloudfront.net (CloudFront)',
  'x-amz-cf-id': 'yQtqn1Lun6-wQAMUncPmRyi5-zfHeI9uDfSkfHcqcgNVzIXdbNXSVg==',
  'x-amz-cf-pop': 'HIO50-C2',
  'x-amz-id-2': 'o4k5gMOjY/oT0rwJIa2YB8CT0ntXF3iG1TD2TWK5XLzaqdtU75cEkLREXEsFijwrFkczLflmp1kmXw5GkT8xEykMNMEj0UMfPGcmpT+HdqA=',
  'x-amz-request-id': 'K3BSTKF571DP0DQW',
  'x-cache': 'Error from cloudfront'
}
❌ Debug info: {
  uploadUrl: 'https://reddit-uploaded-video.s3-accelerate.amazonaws.com',
  bufferSize: 7214203,
  filename: 'TATI G13 - VITE (Official Audio, EP JBML #8).mp4',
  mimeType: 'video/mp4'
}
❌ Reddit native video upload failed: Error: S3 upload failed: 400 - <?xml version="1.0" encoding="UTF-8"?>
<Error><Code>InvalidArgument</Code><Message>POST requires exactly one file upload per request.</Message><ArgumentName>file</ArgumentName><ArgumentValue>0</ArgumentValue><RequestId>K3BSTKF571DP0DQW</RequestId><HostId>o4k5gMOjY/oT0rwJIa2YB8CT0ntXF3iG1TD2TWK5XLzaqdtU75cEkLREXEsFijwrFkczLflmp1kmXw5GkT8xEykMNMEj0UMfPGcmpT+HdqA=</HostId></Error>
    at uploadVideoToRedditNative (/opt/render/project/src/server/routes/postRoutes.js:2245:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async attemptRedditPost (/opt/render/project/src/server/routes/postRoutes.js:2403:41)
    at async postToReddit (/opt/render/project/src/server/routes/postRoutes.js:2803:12)
    at async /opt/render/project/src/server/routes/postRoutes.js:118:22
⚠️ Reddit native video upload failed, falling back to Imgur: S3 upload failed: 400 - <?xml version="1.0" encoding="UTF-8"?>
    at async Promise.all (index 0)
    at async /opt/render/project/src/server/routes/postRoutes.js:151:5
<Error><Code>InvalidArgument</Code><Message>POST requires exactly one file upload per request.</Message><ArgumentName>file</ArgumentName><ArgumentValue>0</ArgumentValue><RequestId>K3BSTKF571DP0DQW</RequestId><HostId>o4k5gMOjY/oT0rwJIa2YB8CT0ntXF3iG1TD2TWK5XLzaqdtU75cEkLREXEsFijwrFkczLflmp1kmXw5GkT8xEykMNMEj0UMfPGcmpT+HdqA=</HostId></Error>
📤 Uploading video to Imgur: TATI G13 - VITE (Official Audio, EP JBML #8).mp4
📊 Base64 video length: 9618940 characters
❌ Imgur video upload failed: 500 - {"status":500,"success":false,"data":{"error":"An unexpected error has occurred","request":"/3/upload","method":"POST"}}
❌ Imgur video upload failed: Imgur video upload failed: 500
❌ All video upload methods failed, falling back to text post: Error: Imgur video upload failed: 500
    at uploadMediaToImgur (/opt/render/project/src/server/routes/postRoutes.js:1695:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async attemptRedditPost (/opt/render/project/src/server/routes/postRoutes.js:2433:35)
    at async postToReddit (/opt/render/project/src/server/routes/postRoutes.js:2803:12)
    at async /opt/render/project/src/server/routes/postRoutes.js:118:22
    at async Promise.all (index 0)
    at async /opt/render/project/src/server/routes/postRoutes.js:151:5
📤 Submitting self post to Reddit with data: {
  api_type: 'json',
  kind: 'self',
  sr: 'u_suareztn',
  title: 'test tes test videoo ideo',
  text: 'test tes test videoo ideo\n' +
    '\n' +
    '**📎 Media Attachment: TATI G13 - VITE (Official Audio, EP JBML #8).mp4**\n' +
    '- Type: Unknown\n' +
    '\n' +
    '*(video upload failed: Imgur video upload failed: 500)*',
  sendreplies: true,
  validate_on_submit: true
}
🔑 Using access token: eyJhbGciOi...
📊 Reddit submit response status: 200
📊 Reddit submit response headers: {
  'accept-ranges': 'bytes',
  'cache-control': 'private, s-maxage=0, max-age=0, must-revalidate, no-store',
  connection: 'keep-alive',
  'content-encoding': 'gzip',
  'content-type': 'application/json; charset=UTF-8',
  date: 'Mon, 14 Jul 2025 08:24:01 GMT',
  expires: '-1',
  nel: '{"report_to": "w3-reporting-nel", "max_age": 14400, "include_subdomains": false, "success_fraction": 1.0, "failure_fraction": 1.0}',
  'report-to': '{"group": "w3-reporting-nel", "max_age": 14400, "include_subdomains": true,  "endpoints": [{ "url": "https://w3-reporting-nel.reddit.com/reports" }]}, {"group": "w3-reporting", "max_age": 14400, "include_subdomains": true, "endpoints": [{ "url": "https://w3-reporting.reddit.com/reports" }]}, {"group": "w3-reporting-csp", "max_age": 14400, "include_subdomains": true, "endpoints": [{ "url": "https://w3-reporting-csp.reddit.com/reports" }]}',
  server: 'snooserv',
  'set-cookie': 'edgebucket=NPdjtYcLxIcXtYpg7x; Domain=reddit.com; Max-Age=63071999; Path=/;  secure',
  'strict-transport-security': 'max-age=31536000; includeSubdomains',
  'transfer-encoding': 'chunked',
  vary: 'Accept-Encoding',
  via: '1.1 varnish',
  'x-content-type-options': 'nosniff',
  'x-frame-options': 'SAMEORIGIN',
  'x-ratelimit-remaining': '998.0',
  'x-ratelimit-reset': '358',
  'x-ratelimit-used': '2',
  'x-ua-compatible': 'IE=edge',
  'x-xss-protection': '1; mode=block'
}
📊 Reddit submit response body (first 500 chars): {"json": {"errors": [], "data": {"url": "https://www.reddit.com/r/u_suareztn/comments/1lzgxg8/test_tes_test_videoo_ideo/", "drafts_count": 0, "id": "1lzgxg8", "name": "t3_1lzgxg8"}}}
📊 Reddit submit parsed data: {
  "json": {
    "errors": [],
    "data": {
      "url": "https://www.reddit.com/r/u_suareztn/comments/1lzgxg8/test_tes_test_videoo_ideo/",
      "drafts_count": 0,
      "id": "1lzgxg8",
      "name": "t3_1lzgxg8"
    }
  }
}
✅ Posted to Reddit successfully
📊 Post details: ID=1lzgxg8, URL=https://reddit.comhttps://www.reddit.com/r/u_suareztn/comments/1lzgxg8/test_tes_test_videoo_ideo/